const liffId = "2006065768-lKEA3oOb";

const data = {
    "type": "bubble",
    "size": "mega",
    "hero": {
        "type": "image",
        "url": "https://img2.pic.in.th/pic/S__1802750.jpg",
        "size": "full",
        "aspectMode": "cover",
        "action": {
            "type": "uri",
            "uri": "https://line.me/"
        }
    },
    "body": {
        "type": "box",
        "layout": "vertical",
        "contents": [
            {
                "type": "text",
                "text": "‡πÑ‡∏Æ‡πÇ‡∏•‡∏°‡∏±‡∏ô‡∏™‡πå‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏¢‡∏∏‡∏î! ‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏î‡πâ 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á üöÄ",
                "weight": "bold",
                "size": "sm",
                "wrap": true
            },
            {
                "type": "box",
                "layout": "baseline",
                "margin": "md",
                "contents": [
                    {
                        "type": "text",
                        "text": "üåè‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏ó‡∏±‡∏ö‡πÉ‡∏à",
                        "weight": "bold",
                        "size": "sm"
                    },
                    {
                        "type": "icon",
                        "size": "sm",
                        "url": "https://developers-resource.landpress.line.me/fx/img/review_gold_star_28.png"
                    },
                    {
                        "type": "icon",
                        "size": "sm",
                        "url": "https://developers-resource.landpress.line.me/fx/img/review_gold_star_28.png"
                    },
                    {
                        "type": "icon",
                        "size": "sm",
                        "url": "https://developers-resource.landpress.line.me/fx/img/review_gold_star_28.png"
                    },
                    {
                        "type": "icon",
                        "size": "sm",
                        "url": "https://developers-resource.landpress.line.me/fx/img/review_gold_star_28.png"
                    },
                    {
                        "type": "icon",
                        "size": "sm",
                        "url": "https://developers-resource.landpress.line.me/fx/img/review_gold_star_28.png"
                    },
                    {
                        "type": "text",
                        "text": "5.0",
                        "size": "sm",
                        "color": "#999999",
                        "margin": "md",
                        "flex": 0
                    }
                ]
            },
            {
                "type": "box",
                "layout": "vertical",
                "margin": "lg",
                "spacing": "sm",
                "contents": [
                    {
                        "type": "box",
                        "layout": "vertical",
                        "spacing": "sm",
                        "contents": [
                            {
                                "type": "text",
                                "text": "‚ñ∂Ô∏è ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏°‡∏Ñ‡πå‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÄ‡∏à‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° LINE",
                                "weight": "bold",
                                "wrap": true,
                                "color": "#ac1e00"
                            },
                            {
                                "type": "text",
                                "text": "üé≤‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô ‡πÑ‡∏•‡∏ü‡πå‡∏™‡∏î‡πÇ‡∏ä‡∏ß‡πå‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏Å‡∏°‡∏™‡πå ‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏î‡∏°‡∏µ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏Ñ‡∏≠‡∏¢‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£",
                                "weight": "bold",
                                "wrap": true
                            },
                            {
                                "type": "text",
                                "wrap": true,
                                "color": "#666666",
                                "size": "sm",
                                "weight": "bold",
                                "contents": [
                                    {
                                        "type": "span",
                                        "text": "üü¢ ‡πÑ‡∏•‡∏ü‡πå‡∏™‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô",
                                        "size": "xs"
                                    },
                                    {
                                        "type": "span",
                                        "text": " ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏∏‡∏à‡∏£‡∏¥‡∏ï",
                                        "size": "xs",
                                        "color": "#ac1e00"
                                    }
                                ],
                                "flex": 5
                            },
                            {
                                "type": "text",
                                "wrap": true,
                                "color": "#666666",
                                "size": "sm",
                                "weight": "bold",
                                "contents": [
                                    {
                                        "type": "span",
                                        "text": "üü¢ ‡πÑ‡∏•‡∏ü‡πå‡∏™‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô",
                                        "size": "xs"
                                    },
                                    {
                                        "type": "span",
                                        "text": " ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Ñ‡∏ú‡∏•",
                                        "size": "xs",
                                        "color": "#ac1e00"
                                    }
                                ],
                                "flex": 5
                            },
                            {
                                "type": "text",
                                "wrap": true,
                                "color": "#666666",
                                "size": "sm",
                                "weight": "bold",
                                "contents": [
                                    {
                                        "type": "span",
                                        "text": "üü¢ ‡πÑ‡∏•‡∏ü‡πå‡∏™‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô",
                                        "size": "xs"
                                    },
                                    {
                                        "type": "span",
                                        "text": " ‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏î‡πâ",
                                        "size": "xs",
                                        "color": "#ac1e00"
                                    }
                                ],
                                "flex": 5
                            },
                            {
                                "type": "text",
                                "wrap": true,
                                "color": "#666666",
                                "size": "sm",
                                "weight": "bold",
                                "contents": [
                                    {
                                        "type": "span",
                                        "text": "üü¢ ‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î\n‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏Ñ‡∏¥‡∏î‡∏¢‡∏≠‡∏î ‡∏Ñ‡∏¥‡∏î‡∏¢‡∏≠‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏ñ‡∏≠‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‚ÄºÔ∏è",
                                        "size": "xs"
                                    }
                                ],
                                "flex": 5
                            },
                            {
                                "type": "text",
                                "wrap": true,
                                "color": "#666666",
                                "size": "sm",
                                "weight": "bold",
                                "contents": [
                                    {
                                        "type": "span",
                                        "text": "üü¢ ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß 5 ‡∏õ‡∏µ ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢",
                                        "size": "xs"
                                    }
                                ],
                                "flex": 5
                            }
                        ]
                    }
                ]
            }
        ]
    },
    "footer": {
        "type": "box",
        "layout": "vertical",
        "spacing": "sm",
        "contents": [
            {
                "type": "button",
                "style": "primary",
                "height": "sm",
                "action": {
                    "type": "uri",
                    "label": "‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°",
                    "uri": "https://line.me/R/ti/g/7CXbxDDLMf"
                }
            },
            {
                "type": "button",
                "style": "primary",
                "height": "sm",
                "action": {
                    "type": "uri",
                    "label": "‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô",
                    "uri": "https://liff.line.me/2006065768-lKEA3oOb"
                },
                "color": "#650000"
            },
            {
                "type": "button",
                "style": "secondary",
                "height": "sm",
                "action": {
                    "type": "uri",
                    "label": "‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô",
                    "uri": "https://lin.ee/Wh7yl5n"
                }
            },
            {
                "type": "box",
                "layout": "vertical",
                "contents": [],
                "margin": "sm"
            }
        ],
        "flex": 0
    }
}
liff.init({ liffId: liffId })
    .then(() => {
        if (!liff.isLoggedIn()) {
            liff.login();
        } else {
            shareMessage().then(()=>{
                liff.closeWindow();
            });
        }
    })
    .catch((err) => {
        console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î LIFF:", err);
    });

function shareMessage() {
    liff.shareTargetPicker([
        {
            "type": "flex",
            "altText": "‡∏û‡∏µ‡πà‡∏Ñ‡πà‡∏∞ ‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏ä‡∏ó‡∏´‡∏ô‡∏π‡∏´‡∏ô‡πà‡∏≠‡∏¢",
            "contents": data
        }
    ], {
        isMultiple: true
    })
    .then((res) => {
        console.log(res);
        if (res) {
            console.log("‡πÅ‡∏ä‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
            liff.closeWindow(); // ‚úÖ ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á LIFF
        } else {
            console.log("‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå");
        }
    })
    .catch((err) => {
        console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå:", err);
    });
}
